<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì •ê·œì‹</title>
    <style>
        #area {
            margin: 30px 10px;
        }

        mark {
            background-color: magenta;
        }
    </style>
</head>

<body>
    <h1>Regular Expression</h1>
    <input type="button" value="ê¸°ë³¸" onclick="test1();">
    <input type="button" value="flag - g | i | m" onclick="test2();">
    <input type="button" value="anchor - ^ | $" onclick="test3();">
    <input type="button" value="@ì‹¤ìŠµë¬¸ì œ" onclick="test4();">
    <input type="button" value="." onclick="test5();">
    <input type="button" value="[]" onclick="test6();">
    <input type="button" value="@ì‹¤ìŠµë¬¸ì œ" onclick="test7();">
    <input type="button" value="\d \w \s" onclick="test8();">
    <input type="button" value="( | )" onclick="test9();">
    <input type="button" value="escaping" onclick="test10();">
    <input type="button" value="* + ?" onclick="test11();">
    <input type="button" value="{n,m}" onclick="test12();">
    <input type="button" value="look around" onclick="test13();">
    <div id="area"></div>

    <script>
        /*
            ì •ê·œí‘œí˜„ì‹
             - íŠ¹ì •ê·œì¹™ì„ ê°€ì§„ ë¬¸ìì—´ ì§‘í•©ì— ëŒ€í•œ í˜•ì‹ ì–¸ì–´
             - ìœ íš¨ì„±ê²€ì‚¬, ê²€ìƒ‰, ë¬¸ìì—´ ì¹˜í™˜ ë“±ì„ íš¨ìœ¨ì ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
             - ì–¸ì–´ì— ë…ë¦½ì ì´ë‹¤.
        */
        const area = document.querySelector('#area');    //ì „ì—­ë³€ìˆ˜
        function test1() {
            // ì •ê·œí‘œí˜„ì‹ ê°ì²´ ìƒì„±
            const re1 = new RegExp(/*ê²€ì‚¬í•˜ê³ ìí•˜ëŠ” íŒ¨í„´*/ "[a-z]");
            const re2 = new RegExp(/[0-9]/);    //ì •ê·œí‘œí˜„ì‹ì—ì„œë§Œ /[]/ ì‚¬ìš©ê°€ëŠ¥
            const re3 = /a/;    // new RegExp("a") == /a/

            // ì •ê·œ í‘œí˜„ì‹ ë‚´ë¶€ì˜ ë§¤ì„œë“œ
            // 1. test() : boolean
            console.log(re3.test('abcde'));
            console.log(re3.test('bcdef'));

            console.log(re2.test('mkm1234'));
            console.log(re2.test('mkm'));

            // ë¬¸ìì—´(string)ì—ì„œ ì •ê·œ í‘œí˜„ì‹ì„ í™œìš©í•˜ëŠ” ë©”ì„œë“œ
            // 1. match
            console.log('cba'.match(/*ì •ê·œí‘œí˜„ì‹ ê°ì²´*/ re1));

            // 2. search
            // indexOfì™€ ìœ ì‚¬í•˜ë‚˜ ì •ê·œí‘œí˜„ì‹ì„ í†µí•´ ê²€ì‚¬
            console.log('aabbccdd'.search(/*ì •ê·œí‘œí˜„ì‹ ê°ì²´*/ re3));

            // 3. replace
            console.log('cabakacada'.replace('a', '!!'));    //ì•ìë¦¬ë§Œ ë°”ê¿ˆ
            console.log('cabakacada'.replaceAll('a', '!!'));

            console.log('cabakacada'.replace(/a/g, '!!'));   //ì •ê·œí‘œí˜„ì‹ ì‚¬ìš©  | g: global ì „ì²´ ë²”ìœ„

            // 4. split
            console.log("ì‚¬ê³¼ ë°° í† ë§ˆí†  ì–‘íŒŒ".split(/\s/));   // \s : ì •ê·œí‘œí˜„ì‹ì—ì„œ ê³µë°±ì„ ì˜ë¯¸í•¨

        }

        function test2() {
            /*
                ì •ê·œí‘œí˜„ì‹ì˜ flagë¬¸ì
                 - g , i , m
                 - g (global) : ì „ì—­ë¹„êµë¥¼ ìˆ˜í–‰
                 - i (ignore) : ëŒ€ì†Œë¬¸ì êµ¬ë¶„í•˜ì§€ ì•Šê³  ë¹„êµë¥¼ ìˆ˜í–‰
                 - m (multi-line) : ì—¬ëŸ¬ì¤„(\n)ì˜ ë¬¸ìì—´ì— ëŒ€í•œ ì¤„ë‹¨ìœ„ ë¹„êµ ìˆ˜í–‰.
            
            */
            const str = 'Javascript jQuery Ajax';
            // $& : ì •ê·œì‹ìœ¼ë¡œ ê²€ì‚¬ëœ textë¥¼ ê°€ë¦¬í‚¤ëŠ” ì˜ˆì•½ì–´
            area.innerHTML = str.replace(/a/g, '<mark>$&</mark>');
        }

        function test3() {
            /*
                anchor ë¬¸ì
                 - ^ : ë¬¸ìì—´ì˜ ì‹œì‘ (ë¬¸ì ì•ì— ë¶™ì„)
                 - $ : ë¬¸ìì—´ì˜ ë (ë¬¸ì ëì— ë¶™ì„)
            */
            const str = 'Javascript\nxxx\njQuery\nAjax';
            // area.innerHTML = str.replace(/^j/gim,'<mark>$&</mark>');
            // g (global) : ë¬¸ìì—´ ì „ì²´ ë²”ìœ„ì—ì„œ 
            // i (ignore) : ëŒ€ì†Œë¬¸ì êµ¬ë¶„ x
            // ^j : jë¡œ ì‹œì‘í•˜ëŠ” ë¬¸ìë§Œ ë³´ê² ë‹¤~
            // m (multi-line) : ê°œí–‰ë¬¸ì í¬í•¨í•´ì„œ ë¹„êµí•˜ê² ë‹¤ã…ã…

            area.innerHTML = str.replace(/x$/gim, '<mark>$&</mark>');
            // x$ : xë¡œ ëë‚˜ëŠ” ë¬¸ìë§Œ ë³´ê² ë‹¤~~~
        }

        function test4() {
            /*
             * ì‚¬ìš©ìë¡œë¶€í„° ë¬¸ìì—´ì„ ì…ë ¥ë°›ê³ (prompt),
             * kë¡œ ì‹œì‘í•˜ë©´ì„œ, hë¡œ ëë‚˜ëŠ” ê²½ìš°ì—ëŠ” ì˜í•˜ì…¨ìŠµë‹ˆë‹¤.
             * ì•„ë‹Œ ê²½ìš°, ì í•©í•œ ë¬¸ìê°€ ì•„ë‹™ë‹ˆë‹¤. ê²½ê³ ì°½ì„ ë„ìš°ì„¸ìš”.
             */
            const str = prompt('ë¬¸ìì—´ì„ ì…ë ¥');

            const re1 = /^k/;
            const re2 = /h$/;
            if (re1.test(str) && re2.test(str)) {
                alert('ğŸ’¯ì˜í•˜ì…¨ìŠµë‹ˆë‹¤.ğŸ’¯');
            } else {
                alert('â—ì í•©í•œ ë¬¸ìê°€ ì•„ë‹™ë‹ˆë‹¤.â—');
            }


            // ì˜ëª»ë§Œë“¦
            // if(str.search(/^k/) & str.search(/h$/)){   
            //     alert('â—ì í•©í•œ ë¬¸ìê°€ ì•„ë‹™ë‹ˆë‹¤.â—');
            //     console.log(str.search(/^k/)&str.search(/h$/));

            // }else{
            //     alert('ğŸ’¯ì˜í•˜ì…¨ìŠµë‹ˆë‹¤.ğŸ’¯');
            //     console.log(str.search(/^k/)&str.search(/h$/));
            // }
            //ê²°ê³¼ê°€ ë‚˜ì˜¤ëŠ” ì´ìœ  :  if ì¡°ê±´ë¬¸ì˜ ê°’ -> ì¡´ì¬í•˜ë©´ trueë¡œ í˜•ë³€í™˜(boolean)
            //                                   -> ì¡´ì¬í•˜ì§€ ì•Šê±°ë‚˜ 0 ì´ë©´ falseë¡œ í˜•ë³€í™˜ (boolean)

        }
        function test5() {
            // . ì„ì˜ì˜ í•œê¸€ìë¥¼ ì˜ë¯¸
            const re1 = /^...$/;
            console.log(re1).test('ab');    //false
            console.log(re1).test('abc');   //true
            console.log(re1).test('abcd');  //false

            const re2 = /a.b/g; //3ê¸€ì & a~b
            area.innerHTML = "aa aab aaab".replace(re2, '<mark>$&</mark>');

            const re3 = /in..$/;

            ["goingo", "goin", "gointo", "going"].array.forEach(element => {
                console.log(re3.test(element)); //T, F, T, F

            });

            const re4 = /^c...k$/;
            ["ck", "cbk", "cbak", "cbawk", "cbawak"].arry.forEach(element => {
                console.log(re4.test(element)); //F, F, T, F, F
            });
        }

        function test6() {
            /*
                [] : í•œê¸€ìë¥¼ ì˜ë¯¸í•œë‹¤.
                 ëŒ€ê´„í˜¸ ë‚´ë¶€ì—ëŠ” ë¬¸ìì˜ ë²”ìœ„ë¥¼ í‘œí˜„í•œë‹¤.
                 ëŒ€ê´„í˜¸ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” íŠ¹ìˆ˜ë¬¸ìëŠ” ë¬¸ìë¡œì¨ í•´ì„ëœë‹¤.
                 ëŒ€ê´„í˜¸ ë‚´ë¶€ì—ì„œ ì‹œì‘ì´ ^ì¸ ê²½ìš° ë’¤ìª½ì˜ ë¬¸ìë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ë¬¸ì
            */
            const s = "Javascript jquery Ajax 12345";
            area.innerHTML = s.replace(/[aji3]/g, '<mark>$&</mark>');  //a ë˜ëŠ” j ë˜ëŠ” i ë˜ëŠ” 3
            area.innerHTML = s.replace(/[^aj]/g, '<mark>$&</mark>'); // aì™€ jë¥¼ ì œì™¸í•œ ëª¨ë“ ê²ƒ (ë…¼ë¦¬ë¶€ì •)
            area.innerHTML = s.replace(/[ABCDEFGHIJKLMNOPQRSTUVWXYZ]/g, '<mark>$&</mark>');
            area.innerHTML = s.replace(/[A-Z0-9]/g, '<mark>$&</mark>');

            const s2 = 'ì•ˆë…•í•˜ì„¸ìš”. ì „ ë¯¸êµ­ì—ì„œ ì˜¨ jamesì—ìš”..';
            area.innerHTML = s2.replace(/[ã„±-ã…ã…-ã…£ê°€-í£]/g, '<mark>$&</mark>');
        }

        function test8() {
            /*
                ë¬¸ìí´ë˜ìŠ¤(ë©”íƒ€ë¬¸ì)

                \d (decimal) : ìˆ«ì == [0-9]
                \w (word) : ì˜ë¬¸ì, ìˆ«ì, _ == [a-zA-Z0-9_]
                \s (space) : ê³µë°±ë¬¸ì, íƒ­, ê°œí–‰ë¬¸ì == [ \t\n]

                \D : ìˆ«ìê°€ ì•„ë‹Œ ë¬¸ì == [^0-9]
                \W : ì˜ë¬¸ì, ìˆ«ì, _ ê°€ ì•„ë‹Œ ë¬¸ì == [^a-zA-z0-9]
                \S : ê³µë°±ë¬¸ì, íƒ­, ê°œí–‰ë¬¸ìê°€ ì•„ë‹Œ ë¬¸ì == [^ \t\n]
            */
            var s = "A1 B2 c3 d_4 e:5' ` ffGG6767--__--!\"@#$%^&*()\tê°€\në‚˜\në‹¤\n";

            //ê²°ê³¼ê°’ì´ ê°™ìŒ : ìˆ«ì
            area.innerHTML = s.replace(/\d/g, '<mark>$&</mark>');
            area.innerHTML = s.replace(/[0-9]/g, '<mark>$&</mark>');

            //ê²°ê³¼ê°’ì´ ê°™ìŒ : ì˜ë¬¸ì,ìˆ«ì
            area.innerHTML = s.replace(/\w/g, '<mark>$&</mark>');
            area.innerHTML = s.replace(/[a-z0-9_]/gi, '<mark>$&</mark>');

            //ê²°ê³¼ê°’ì´ ê°™ìŒ : ê³µë°±ë¬¸ì, íƒ­, ê°œí–‰ë¬¸ì
            area.innerHTML = s.replace(/\s/g, '<mark>$&</mark>');
            area.innerHTML = s.replace(/[ \t\n]/g, '<mark>$&</mark>');

            // ^ë¦¬ë²„ìŠ¤
            area.innerHTML = s.replace(/\D/g, '<mark>$&</mark>');    //ìˆ«ì ì œì™¸ ëª¨ë“ ê²ƒ
            area.innerHTML = s.replace(/\W/g, '<mark>$&</mark>');    //ì˜ë¬¸ì, ìˆ«ì ì œì™¸ ëª¨ë“ ê²ƒ
            area.innerHTML = s.replace(/\S/g, '<mark>$&</mark>');    //ê³µë°±ë¬¸ì, íƒ­, ê°œí–‰ë¬¸ì ì œì™¸ ëª¨ë“ ê²ƒ
        }

        function test9() {
            /*
                ê·¸ë£¹í•‘
                 () : ê·¸ë£¹í•‘    ì¡°ê±´ì„ ê·¸ë£¹í™”í• ë•Œ ì‚¬ìš©
                  | : or ì—°ì‚°ì
            */
            var s = "ì›”ìš”ì¼ì—ëŠ” ì›”ìš”ë³‘, í™”ìš”ì¼ì€ í™”ê°€ ë¶€ê¸€ë¶€ê¸€, ìˆ˜ìš”ì¼ì€ ìˆ ì´ í™• ë•¡ê¸´ë‹¤. ëª©ìš”ì¼ì´ ëª©ì´ ì»¥ ë§‰íˆê³ , ê¸ˆìš”ì¼ì€ ê¸ˆë°© ì˜¬ê±° ê°™ì§€ ì•Šë‹¤.";
            var st = 'ì›”ìš”ì¼ì—” ì•„ë§ˆ ë°”ì˜ì§€ ì•Šì„ê¹Œ, í™”ìš”ì¼ë„ ì„±ê¸‰í•´ë³´ì´ì§€ ì•Šê·¸ë˜, ìˆ˜ìš”ì¼ì€ ë­”ê°€ ì–´ì©¡ì©¡í•œ ëŠë‚Œ, ëª©ìš”ì¼ì€ ê·¸ëƒ¥ ë‚´ê°€ ì™ ì§€ ì‹«ì–´';
            const re1 = /[ìˆ˜ëª©ê¸ˆ]ìš”ì¼/g;
            const re2 = /(ìˆ˜|ëª©|ê¸ˆ)ìš”ì¼/g;
            const re3 = /(ìˆ˜ìš”ì¼|ëª©ìš”ì¼|ê¸ˆìš”ì¼)/g;
            area.innerHTML = s.replace(re1, '<mark>$&</mark>');
            area.innerHTML = s.replace(re2, '<mark>$&</mark>');
        }
        /*
            escaping
             - ë©”íƒ€ë¬¸ìë¥¼ ì‹¤ì œë¬¸ìê°’ìœ¼ë¡œ ì‚¬ìš©í•˜ê³ ì í•œë‹¤ë©´ \ë¥¼ í†µí•´ ì´ìŠ¤ì¼€ì´í•‘ ì²˜ë¦¬í•œë‹¤.
             - ë‹¨, []ë‚´ë¶€ì—ì„œëŠ” escapingì´ í•„ìš”ì—†ë‹¤.
        */
        function test10() {
            const s = '$12$ \\-\\ $25$';
            area.innerHTML = s.replace(/\$/g, '<mark>$&</mark>');
            area.innerHTML = s.replace(/[$]/g, '<mark>$&</mark>');
            area.innerHTML = s.replace(/\$$/g, '<mark>$&</mark>');
            area.innerHTML = s.replace(/^\$/g, '<mark>$&</mark>');

        }

        function test11() {
            /*
                ìˆ˜ëŸ‰ì
                a* : aê°€ 0ê°œ ì´ìƒ
                a+ : aê°€ 1ê°œ ì´ìƒ
                a? : aê°€ 0ê°œ í˜¹ì€ 1ê°œ
            */
            const s = " aabc abc bc";
            area.innerHTML = s.replace(/a*b/g, '<mark>$&</mark>');
            area.innerHTML = s.replace(/a+b/g, '<mark>$&</mark>');
            area.innerHTML = s.replace(/a?b/g, '<mark>$&</mark>');
        }

        function test12() {
            /*
                ìˆ˜ëŸ‰í‘œí˜„
                a{5} : aê°€ 5ê°œ
                a{2,5} : aê°€ 2~5ê°œ
                a{3, } : aê°€ 3ê°œ ì´ìƒ
                X a{ ,4} : ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¬¸ë²• X
            */
             const s = "aa aba abba abbba";
            area.innerHTML = s.replace(/ab{2}a/g, '<mark>$&</mark>');
            area.innerHTML = s.replace(/ab{1,2}a/g, '<mark>$&</mark>');
            area.innerHTML = s.replace(/ab{2,}a/g, '<mark>$&</mark>');

            //ìˆ«ìë¡œì‹œì‘í•˜ê³ , ì˜ë¬¸ì3ê¸€ìì´ìƒ ì—°ë‹¬ì•„ ë‚˜ì˜¤ê³ , .ë§ˆì¹¨í‘œë¡œ ëë‚˜ëŠ” ë¬¸ìì—´ì„ ê²€ì‚¬í•˜ëŠ” ì •ê·œì‹ ì‘ì„±
            // true : 1abcì•ˆë…•í•˜ì„¸ìš”. 3xyzkkk. 1ABC.
            // false : 100 1cbã…‹ã…‹ã…‹. ì•„ì•„ì•„ì•„.
            //ë°°ì—´ë¡œ í–ˆê¸° ë•Œë¬¸ì—gì‚¬ìš©í•˜ë©´ ì•ˆë¨

            const re = /^\d[a-z]{3,}.*\.$/i;
            ["1abcì•ˆë…•í•˜ì„¸ìš”.", "3xyzkkk.", "1ABC."].forEach(function (s) {
                console.log(re.test(s)); // true
            });
            ["100", "1cbã…‹ã…‹ã…‹.", "ì•„ì•„ì•„ì•„.", "1ê°€ë‚˜ë‹¤abc.", "123abcë‹¤ë‚˜ê°€."].forEach(function (s) {
                console.log(re.test(s)); // false
            });  
        }
        function test13() {
            /*
                Look Around : íƒìƒ‰

                1. look ahead(ì „ë°©íƒìƒ‰)
                 - 000(?=(re)) : 000ë‹¤ìŒ reì¼ì¹˜í•˜ëŠ” íŒ¨í„´ì„ ê²€ìƒ‰
                 - ìµœì¢… ë°˜í™˜ë˜ëŠ” íŒ¨í„´ì€ 000ë§Œ ë°˜í™˜
                 - 000(?!(re)) : 000ë‹¤ìŒ reì™€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” íŒ¨í„´

                2. look behind(í›„ë°©íƒìƒ‰)
                 - (?<=(re))000 : 000ì•ì— reì¼ì¹˜í•˜ëŠ” ìš”ì†Œë¥¼ ë°˜í™˜
                 - (?<!(re))000 : 000ì•ì— reì™€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ìš”ì†Œë¥¼ ë°˜í™˜
            */
            const s = 'hello world hello tom hello jane';
            area.innerHTML = s.replace(/hello(?=( world))/g,'<mark>$&</mark>');
            area.innerHTML = s.replace(/hello(?!( world))/g,'<mark>$&</mark>');

            const s2 = 'hello world lotte world t world';
            // worldì•ì— helloê°€ ë“¤ì–´ê°„ worldë§Œ íƒìƒ‰
            // worldì•ì— helloê°€ ì•„ë‹Œ ë¬¸ìì—´ì´ ë“¤ì–´ê°„ worldë“¤ íƒìƒ‰
            area.innerHTML = s2.replace(/(?<=(hello ))world/g,'<mark>$&</mark>');
            area.innerHTML = s2.replace(/(?<!(hello ))world/g,'<mark>$&</mark>');
        }
    </script>

</body>

</html>